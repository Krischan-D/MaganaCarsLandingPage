import {car_information} from "./data/product.js"

function filterRecommendCars(array, maxPrice){
    return array.filter((car)=>{
        const price = Number(car.price.replace(/[^0-9]/g, ""))
        return price < maxPrice
    });
}
  
const maxPrice = 1500000
const recommendedCars = filterRecommendCars(car_information, maxPrice)

export function renderRecommendedCars() {
    let recommendedCarsHTML = '';

    recommendedCars.forEach((car) => {
        recommendedCarsHTML += `
        <div class="car-card">
          <div class="img-container"> <img src="${car.image}"alt=""></div>
          <div class="car-information">
            <h1>${car.model_name}</h1>
            <div class="car-specification-container">
              <div class="car-specifications">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="#000000" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M5 2C3.34315 2 2 3.34315 2 5V11V20C1.44772 20 1 20.4477 1 21C1 21.5523 1.44772 22 2 22H3H14H15C15.5523 22 16 21.5523 16 21C16 20.4477 15.5523 20 15 20V12C15.5523 12 16 12.4477 16 13V17.5C16 18.8807 17.1193 20 18.5 20C19.8807 20 21 18.8807 21 17.5V14H21.5C22.8807 14 24 12.8807 24 11.5C24 10.1193 22.8807 9 21.5 9H21V8C21 7.77293 20.9227 7.55262 20.7809 7.37531L18.7809 4.8753C18.4359 4.44404 17.8066 4.37412 17.3753 4.71913C16.944 5.06414 16.8741 5.69343 17.2191 6.12469L19 8.35078V10V13V17.5C19 17.7761 18.7761 18 18.5 18C18.2239 18 18 17.7761 18 17.5V13C18 11.3431 16.6569 10 15 10V5C15 3.34315 13.6569 2 12 2H5ZM13 12.653V20H4V12.653C5.39151 13.2257 6.96044 13.5 8.5 13.5C10.0396 13.5 11.6085 13.2257 13 12.653ZM8.5 11.5C6.85166 11.5 5.24864 11.1308 4 10.4387V5C4 4.44772 4.44772 4 5 4H12C12.5523 4 13 4.44772 13 5V10.4387C11.7514 11.1308 10.1483 11.5 8.5 11.5ZM21.5 12H21V11H21.5C21.7761 11 22 11.2239 22 11.5C22 11.7761 21.7761 12 21.5 12Z" fill="#000000"/>
    </svg>
                <p>${car.specifications.fuel_type}</p>                
              </div>
              <div class="car-specifications">
                <svg width="30" height="30" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path fill="#000000" d="M256 25C128.3 25 25 128.3 25 256s103.3 231 231 231 231-103.3 231-231S383.7 25 256 25zm0 30c110.9 0 201 90.1 201 201s-90.1 201-201 201S55 366.9 55 256 145.1 55 256 55zM80.52 203.9c-4.71 19.2-7.52 37-7.52 54 144.7 30.3 121.5 62.4 148 177.8 11.4 2.1 23 3.3 35 3.3s23.6-1.2 35-3.3c26.5-115.4 3.3-147.5 148-177.8-.6-18.9-3-38.4-7.5-54C346.7 182.7 301.1 172 256 172c-45.1 0-90.7 10.7-175.48 31.9zM256 183c40.2 0 73 32.8 73 73s-32.8 73-73 73-73-32.8-73-73 32.8-73 73-73zm0 18c-30.5 0-55 24.5-55 55s24.5 55 55 55 55-24.5 55-55-24.5-55-55-55z"/></svg
</svg>
                <p>${car.specifications.transmission}</p>                
              </div>
              <div class="car-specifications">
                        <svg fill="#000000" height="30" width="30" version="1.1" id="Icons" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
          viewBox="0 0 32 32" xml:space="preserve">
        <path d="M8.4,22l1.2-2.3c0.5-1,1.5-1.7,2.7-1.7h3.5c0.1,0,0.2,0,0.2,0c1.8-2.4,4.7-4,8-4c1.2,0,2.3,0.2,3.4,0.6
          C27,14,26.5,13.4,26,13h1c0.6,0,1-0.4,1-1s-0.4-1-1-1h-2.8L23,8c-0.8-1.8-2.6-3-4.6-3H9.6C7.6,5,5.8,6.2,5,8l-1.3,3H1
          c-0.6,0-1,0.4-1,1s0.4,1,1,1h1c-1.2,0.9-2,2.4-2,4v4c0,0.9,0.4,1.7,1,2.2V25c0,1.7,1.3,3,3,3h2c1.7,0,3-1.3,3-3v-1h5
          c0-0.7,0.1-1.4,0.2-2H8.4z M7,19H4c-0.6,0-1-0.4-1-1s0.4-1,1-1h3c0.6,0,1,0.4,1,1S7.6,19,7,19z M5.5,12l1.4-3.2C7.4,7.7,8.4,7,9.6,7
          h8.7c1.2,0,2.3,0.7,2.8,1.8l1.4,3.2H5.5z"/>
        <path d="M31.7,21.9c-0.1-0.5-0.7-0.8-1.2-0.7c-0.7,0.2-1.2,0-1.3-0.2c-0.1-0.2,0-0.7,0.5-1.3c0.4-0.4,0.4-1,0-1.4
          c-1-1-2.2-1.7-3.6-2.1c-0.5-0.1-1.1,0.2-1.2,0.7c-0.2,0.7-0.6,1-0.9,1s-0.6-0.4-0.9-1c-0.2-0.5-0.7-0.8-1.2-0.7
          c-1.4,0.4-2.6,1.1-3.6,2.1c-0.4,0.4-0.4,1,0,1.4c0.5,0.5,0.6,1,0.5,1.3c-0.1,0.2-0.6,0.4-1.3,0.2c-0.5-0.1-1.1,0.2-1.2,0.7
          C16.1,22.6,16,23.3,16,24s0.1,1.4,0.3,2.1c0.1,0.5,0.7,0.8,1.2,0.7c0.7-0.2,1.2,0,1.3,0.2c0.1,0.2,0,0.7-0.5,1.3
          c-0.4,0.4-0.4,1,0,1.4c1,1,2.2,1.7,3.6,2.1c0.5,0.1,1.1-0.2,1.2-0.7c0.2-0.7,0.6-1,0.9-1s0.6,0.4,0.9,1c0.1,0.4,0.5,0.7,1,0.7
          c0.1,0,0.2,0,0.3,0c1.4-0.4,2.6-1.1,3.6-2.1c0.4-0.4,0.4-1,0-1.4c-0.5-0.5-0.6-1-0.5-1.3c0.1-0.2,0.6-0.4,1.3-0.2
          c0.5,0.1,1.1-0.2,1.2-0.7c0.2-0.7,0.3-1.4,0.3-2.1S31.9,22.6,31.7,21.9z M24,27c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S25.7,27,24,27
          z"/>
        </svg>
                <p>${car.specifications.engine_displacement}</p>                
              </div>
              <div class="car-specifications">
              <svg fill="#000000" height="30" width="30" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
          viewBox="0 0 353.926 353.926" xml:space="preserve">
        <path d="M210.286,344.926c0,4.971-4.029,9-9,9h-48.65c-4.971,0-9-4.029-9-9s4.029-9,9-9h48.65
          C206.257,335.926,210.286,339.955,210.286,344.926z M289.677,258.958v25.928c0,19.259-15.67,34.928-34.931,34.928H99.177
          c-19.259,0-34.928-15.668-34.928-34.928v-25.928c0-4.971,4.029-9,9-9h2.394c-0.021-0.258-0.033-0.52-0.033-0.784v-24.118
          c-0.013-0.535,0.023-1.066,0.105-1.588c0.204-1.329,0.699-2.561,1.418-3.631c0.705-1.055,1.639-1.969,2.767-2.659
          c0.457-0.281,0.94-0.522,1.446-0.719c3.564-1.483,7.107-3.016,10.605-4.586V101.909c0-17.877,11.375-33.581,27.599-39.623
          c-0.019-0.492-0.028-0.984-0.028-1.48V38.578C119.521,17.306,136.827,0,158.098,0h37.725C217.095,0,234.4,17.306,234.4,38.578
          v22.229c0,0.495-0.01,0.988-0.028,1.478c6.395,2.378,12.129,6.28,16.702,11.351c0.16-0.3,0.318-0.599,0.478-0.899
          c2.318-4.396,7.761-6.081,12.16-3.76c4.396,2.319,6.079,7.764,3.76,12.16c-16.845,31.926-41.307,61.508-72.707,87.923
          c-25.063,21.083-53.512,39.294-84.813,54.313v26.586h134.02V141.64c0-4.971,4.029-9,9-9s9,4.029,9,9v108.318h18.706
          C285.647,249.958,289.677,253.987,289.677,258.958z M137.521,60.807c0,1.842,0.243,3.629,0.699,5.33
          c0.073,0.22,0.138,0.444,0.193,0.672c2.574,8.428,10.424,14.576,19.684,14.576h37.725c9.259,0,17.109-6.146,19.685-14.573
          c0.057-0.231,0.122-0.458,0.195-0.68c0.455-1.699,0.698-3.484,0.698-5.325V38.578C216.4,27.231,207.169,18,195.822,18h-37.725
          c-11.346,0-20.576,9.231-20.576,20.578V60.807z M109.951,203.272c56.184-28.521,102.335-68.15,131.162-112.739
          c-2.612-4.871-6.75-8.658-11.666-10.83c-6.622,11.738-19.213,19.681-33.625,19.681h-37.725c-14.411,0-27.002-7.944-33.624-19.682
          c-8.604,3.8-14.522,12.438-14.522,22.207V203.272z M271.677,267.958h-18.57c-0.046,0-0.091,0.001-0.136,0.001h-152.02
          c-0.045,0-0.09,0-0.136-0.001H82.249v16.928c0,9.334,7.594,16.928,16.928,16.928h155.569c9.336,0,16.931-7.594,16.931-16.928
          V267.958z"/>
        </svg>
                <p>${car.specifications.seats} seats</p>                
              </div>
            </div>
            <div class="price-button">
              <span>${car.price}</span>
              <button ${car.id} class="view-car-btn button" data-car-id="${car.id}">View</button>
            </div>
          </div>
        </div>
        `;
    });

    document.getElementById('cars-container').innerHTML = recommendedCarsHTML;
}

renderRecommendedCars();




function viewCar(){
  const viewCarButtons = document.querySelectorAll('.view-car-btn');
  viewCarButtons.forEach((button) => {
      button.addEventListener('click', (e) => {
          const buttonElement = e.target.closest('.button');
          const carId = buttonElement.getAttribute('data-car-id');
          console.log(carId)
          window.location.href = `details.html?carId=${carId}`;
          
      });
  });

  
}

viewCar()